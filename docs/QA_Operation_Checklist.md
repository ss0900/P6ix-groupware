# 영업관리 모듈 QA 체크리스트

## 목적

- 영업관리 모듈의 주요 플로우가 정상 동작하는지 확인
- UI/백엔드 연동, 자동 히스토리, 캘린더/대시보드 집계 검증

## 사전 조건

- 로그인 가능한 계정 보유
- 워크스페이스(회사) 권한 설정 완료
- 백엔드 및 프론트 실행 중

## 테스트 데이터 예시

- 고객사: 세움건설
- 담당자: 홍길동 / 010-1111-2222 / hong@test.com
- 파이프라인: 민간공사
- 단계: 신규문의 → 현장미팅 → 견적제출 → 협상 → 수주(수주) → 실주(실주)
- 리드: 강남 A현장 리모델링 / 예상금액 50,000,000 / 유입경로 소개
- 견적 항목: 철거 1,000,000 / 인테리어 30,000,000
- 입찰: OO 공공청사 리모델링 입찰 / 보증금 1,000,000
- 매출 계획: 1차 기성 / 20,000,000
- 수금: 1차 기성 수금 / 20,000,000

## 1. 파이프라인/단계 설정

- [ ] 이동: 영업관리 > 파이프라인 > 설정
- [ ] 파이프라인 추가: 이름=민간공사
- [ ] 기대: 파이프라인 목록에 표시되고 선택 가능
- [ ] 단계 추가: 신규문의, 현장미팅, 견적제출, 협상, 수주(유형 수주), 실주(유형 실주)
- [ ] 기대: 단계 순서/색상/확률이 저장됨

**파이프라인/단계 설정 상세 절차**

- 진입: 상단 메뉴에서 영업관리 클릭 → 좌측 메뉴에서 파이프라인 선택 → 화면 우상단/상단의 설정 버튼 클릭
- 파이프라인 추가: 좌측 “파이프라인” 영역의 입력칸에 민간공사 입력 → 추가 버튼 클릭
- 기대 확인: 좌측 목록에 민간공사가 표시되고 클릭 시 선택 상태(하이라이트)로 바뀜
- 단계 추가: 우측 “단계 목록” 영역에서 아래 순서로 한 개씩 추가
  1. 신규문의
  2. 현장미팅
  3. 견적제출
  4. 협상
  5. 수주 (유형=수주)
  6. 실주 (유형=실주)
- 단계 입력 방법(반복):
  - 단계명 입력 → 색상 선택(원하는 색) → 확률(%) 입력 → 유형 선택(일반/수주/실주) → 저장/추가
- 기대 확인:
  - 각 단계가 목록에 표시되고 저장됨
  - 순서가 입력한 순서대로 유지됨
  - 색상/확률/유형이 재진입 후에도 그대로 보임

## 2. 고객사/담당자 등록

- [ ] 이동: 영업관리 > 고객관리
- [ ] 고객사 등록: 세움건설, 사업자번호, 업종, 전화, 주소 입력
- [ ] 기대: 고객사 카드가 목록에 표시됨
- [ ] 고객사 상세 이동 후 담당자 추가: 홍길동, 이메일, 전화, 주 담당자 체크
- [ ] 기대: 담당자 목록에 표시되고 주 담당자 뱃지 표시

**고객사/담당자 등록 상세 절차**

- 이동: 상단 메뉴 영업관리 → 좌측 메뉴 고객관리
- 고객사 등록:
  - 화면 상단의 고객사 등록 또는 + 버튼 클릭
  - 입력:
    - 고객사명: 세움건설
    - 사업자번호: 000-00-00000 (형식 맞춰 입력)
    - 업종: 예) 건설
    - 전화: 02-000-0000
    - 주소: 서울시 …
  - 저장 클릭
- 기대 확인:
  - 목록/카드에 세움건설이 표시됨
  - 카드에 업종/전화/주소 등 기본 정보가 보임
- 고객사 상세 이동:
  - 목록에서 세움건설 카드(또는 행) 클릭 → 상세 페이지 이동
- 담당자 추가:
  - 담당자 추가 버튼 클릭
  - 입력:
    - 이름: 홍길동
    - 이메일: hong@test.com
    - 전화: 010-0000-0000
    - 주 담당자 체크
  - 저장 클릭
- 기대 확인:
  - 담당자 목록에 홍길동 표시
  - 주 담당자 뱃지/표시가 보임

## 3. 리드 생성

- [ ] 이동: 영업관리 > 영업기회 > 영업기회 등록
- [ ] 입력: 제목, 파이프라인, 단계(신규문의), 고객사/담당자, 예상금액, 마감일, 유입경로
- [ ] 기대: 리스트에 리드가 표시됨, 단계/고객/금액/담당 표시

**리드 생성 상세 절차**

- 이동:
  - 상단 메뉴 영업관리 → 좌측 메뉴 영업기회
  - 화면 우측 상단 영업기회 등록(또는 + 등록) 버튼 클릭
- 입력(폼):
  - 제목: 예) 세움건설 리모델링 견적 문의
  - 파이프라인: 민간공사
  - 단계: 신규문의
  - 고객사: 세움건설
  - 담당자: 홍길동 (없으면 선택 없이 저장 가능)
  - 예상금액: 50000000
  - 마감일(예상 수주일): YYYY-MM-DD
  - 유입경로: 전화 또는 웹폼 등 선택
- 저장:
  - 저장 버튼 클릭 → 리스트 화면으로 이동(또는 성공 알림)
- 기대 확인:
  - 리드 리스트에 방금 생성한 항목이 표시됨
  - 리스트 컬럼에 **단계/고객사/예상금액/담당자**가 보임
  - (있다면) 다음 액션일/최근활동/지연 뱃지도 정상 표시됨

## 4. 인박스 접수

- [ ] 이동: 영업관리 > 영업접수
- [ ] 접수 처리 클릭: 단계=현장미팅, 메모 입력, TODO 생성 체크
- [ ] 기대: 리드 상세 활동 로그에 접수 처리/단계 변경 기록 생성
- [ ] 기대: TODO 생성 및 리드 next action 예정일 갱신

**인박스 접수 상세 절차**

- 이동: 상단 메뉴 영업관리 → 좌측 메뉴 영업접수
- 접수 대상 선택:
  - 리스트에서 신규 리드(신규 문의/접수 상태) 항목 확인
  - 해당 행의 접수 처리 버튼 클릭
- 접수 처리 입력:
  - 단계: 현장미팅 선택
  - 메모: 예) 현장 방문 일정 조율 필요
  - TODO 생성 체크 (있다면 기한/담당자 입력)
  - 저장/확인 클릭
- 기대 확인:
  - 해당 리드 상세로 이동하거나, 리드 상세 열어서 확인
  - 활동 로그에 접수 처리 또는 단계 변경 기록이 자동으로 생성됨
  - TODO가 생성되고, 리드의 다음 액션 예정일(next action)이 입력한 기한으로 갱신됨

## 5. 파이프라인 칸반 이동

- [ ] 이동: 영업관리 > 파이프라인
- [ ] 리드 카드 드래그: 현장미팅 → 견적제출
- [ ] 기대: 카드가 새 단계에 표시됨
- [ ] 기대: 리드 상세 활동 로그에 단계 변경 기록 생성

**파이프라인 칸반 이동 상세 절차**

- 이동: 상단 메뉴 영업관리 → 좌측 메뉴 파이프라인
- 준비 확인: 현장미팅 단계에 카드가 1개 이상 있는지 확인
- 이동:
  - 해당 카드 클릭 후 드래그
  - 견적제출 컬럼 위에 드롭
- 기대 확인:
  - 카드가 즉시 견적제출 컬럼으로 이동해 표시됨
  - 해당 카드 클릭 → 리드 상세로 이동
  - 활동 로그 탭에서 단계 변경 기록이 생성되어 있는지 확인

## 6. 리드 상세 탭 검증

- [ ] 활동 탭: 활동 추가(전화), 제목/내용 입력 후 저장
- [ ] 기대: 활동 목록에 표시, 최근 접촉일 갱신
- [ ] TODO 탭: TODO 추가 후 저장
- [ ] 기대: TODO 목록 표시, next action 예정일 갱신
- [ ] TODO 완료 체크: 완료 처리
- [ ] 기대: 활동 로그에 TODO 완료 기록 생성
- [ ] 파일 탭: 파일 업로드
- [ ] 기대: 파일 목록 표시, 활동 로그에 파일 추가 기록 생성
- [ ] 견적 탭: 견적 작성 버튼 클릭
- [ ] 기대: 견적 작성 화면으로 이동

**리드 상세 탭 검증 상세 절차**

- 이동: 영업관리 > 영업기회에서 리드 클릭 → 상세 화면 진입(좌측 기본정보, 우측 탭 영역 확인)

1. **활동 탭**
   - 탭에서 활동 추가 클릭
   - 유형: 전화 선택
   - 제목/내용 입력 후 저장
   - 기대 확인:
     - 활동 목록에 새 항목 표시
     - 리드의 최근 접촉일(last_contacted_at)이 갱신됨
2. **TODO 탭**

   - TODO 추가 클릭
   - 제목/기한/담당자 입력 → 저장
   - 기대 확인:
     - TODO 목록에 항목 표시
     - 리드의 next action 예정일이 입력한 기한으로 갱신됨

3. 우측 탭에서 할 일 클릭
4. 우측 상단 + 할 일 추가 버튼 클릭
5. 입력
   - 제목: 예) 현장 방문 일정 확정
   - 기한: 오늘+1일 (시간 포함)
   - 담당자: 본인 또는 임의 선택
6. 저장 클릭

기대 결과

- 할 일 목록에 새 항목이 보임
- 좌측 “기본 정보”의 다음 액션 예정일이 방금 입력한 기한으로 업데이트됨
- (선택) 할 일 항목 체크박스로 완료 처리하면 활동 로그에 TODO 완료 기록 추가됨

3. **TODO 완료 처리**
   - 방금 만든 TODO 항목에서 완료 체크
   - 기대 확인:
     - TODO 상태가 완료로 표시
     - 활동 로그에 TODO 완료 기록 생성됨
4. **파일 탭**
   - 파일 업로드 클릭
   - 로컬 파일 선택 후 업로드
   - 기대 확인:
     - 파일 목록에 업로드 항목 표시
     - 활동 로그에 파일 추가 기록 생성됨
5. **견적 탭**

- 견적 작성 버튼 클릭
- 기대 확인:
  - 견적 작성 화면으로 이동 (/operation/sales/quotes/new)

## 7. 견적 등록/발송

- [ ] 견적 등록: 제목, 항목, 수량/단가 입력 후 저장
- [ ] 기대: 견적 리스트에 생성됨, 활동 로그에 견적 작성 기록
- [ ] 견적 리스트에서 발송 버튼 클릭
- [ ] 기대: 상태가 발송됨으로 변경, 활동 로그에 견적 발송 기록 생성

**견적 등록/발송 상세 절차**

1. **견적 등록**

- 이동: 영업관리 > 견적서
- 우측 상단 견적 작성 버튼 클릭
- 입력:
  - 제목: 예) 세움건설 리모델링 견적
  - 고객/리드 선택 (필수)
  - 항목 추가:
    - 항목명: 타일 공사
    - 수량: 100
    - 단가: 50000
- 저장 클릭

**기대 확인**

- 견적 리스트에 새 견적이 표시됨
- 해당 리드 상세 > 활동 탭에 견적 작성 기록이 추가됨

1. **견적 발송**

- 견적 리스트에서 해당 견적의 발송 버튼 클릭
- (있다면) 수신자/제목 확인 후 발송 확정

**기대 확인**

- 견적 상태가 발송됨(또는 SENT)으로 변경
- 리드 활동 로그에 견적 발송 기록이 추가됨

## 8. 캘린더 통합

- [ ] 이동: 영업관리 > TODO 캘린더
- [ ] 기대: 리드 TODO, 리드 마감일, 견적 유효일, 입찰 마감일 표시
- [ ] 날짜 클릭 시 우측 목록 노출 확인

**캘린더 통합 상세 절차**

- 이동: 상단 메뉴 영업관리 → 좌측 메뉴 TODO 캘린더

1. **기본 노출 확인**
   - 화면에 월/주/일 캘린더 뷰가 보이는지 확인
   - 기대: 아래 항목들이 각 날짜에 표시됨
     - 리드 TODO(LeadTask.due_at)
     - 리드 마감일(예상 수주일)
     - 견적 유효일(Quote.valid_until)
     - 입찰 마감일(Tender.deadline)
2. **날짜 클릭**
   - 일정이 있는 날짜 클릭
   - 기대: 우측(또는 하단) 상세 목록 패널에 해당 날짜의 일정이 나열됨
3. **일정 상세 확인**

- 목록에서 항목 클릭 시 리드 상세로 이동하거나 정보 팝오버 표시 확인
- 기대: 일정 유형(예: TODO/견적/입찰/마감일)과 제목이 구분되어 표시됨

## 9. 대시보드

- [ ] 이동: 영업관리 > 대시보드
- [ ] 기대: KPI 카드(이번달 신규/진행/수주/실주) 표시
- [ ] 기대: 단계별 전환 표 표시
- [ ] 기대: 지연 리드 TOP 목록 표시

## 10. 입찰

- [ ] 이동: 영업관리 > 입찰
- [ ] 입찰 등록: 입찰명, 연관 리드, 마감일, 보증금, 서류 입력 후 저장
- [ ] 기대: 입찰 목록에 표시됨
- [ ] 기대: 캘린더에 입찰 마감 이벤트 표시

**입찰 등록 상세 절차**

- 이동: 상단 메뉴 영업관리 → 좌측 메뉴 입찰

1. **입찰 등록**
   - 화면 우측 상단 입찰 등록 또는 + 등록 버튼 클릭
   - 입력:
     - 입찰명: 예) 세움건설 리모델링 입찰
     - 연관 리드: 세움건설 리모델링 견적 문의
     - 마감일: YYYY-MM-DD HH:MM
     - 보증금: 10000000
     - 서류: 제안서, 사업자등록증, 실적증명 등
   - 저장 클릭
2. **목록 표시 확인**
   - 입찰 리스트에 새 항목이 표시됨
   - 상태/마감일/연관 리드 정보가 보이는지 확인
3. **캘린더 반영 확인**

- 영업관리 > TODO 캘린더로 이동
- 마감일 날짜에 입찰 이벤트가 표시되는지 확인
- 우측 목록/상세에서 입찰 마감 유형으로 구분되는지 확인

## 11. 매출/수금

- [ ] 이동: 영업관리 > 매출/수금
- [ ] 매출 계획 추가: 항목명, 리드, 예정금액/예정일, 상태 입력
- [ ] 기대: 매출 계획 목록에 표시됨
- [ ] 수금 추가: 리드, 매출 계획 선택, 금액/예정일, 상태 입력
- [ ] 기대: 수금 목록에 표시됨

**매출/수금 상세 절차**

- 이동: 상단 메뉴 영업관리 → 좌측 메뉴 매출/수금

1. **매출 계획 추가**

- 화면의 매출 계획 추가 버튼 클릭
- 입력:
  - 항목명: 예) 1차 기성
  - 리드: 세움건설 리모델링 견적 문의
  - 예정금액: 30000000
  - 예정일: YYYY-MM-DD
  - 상태: 계획 또는 청구 등
- 저장 클릭

**기대 확인**

- 매출 계획 목록에 새 항목이 표시됨

1. **수금 추가**

- 수금 추가 버튼 클릭
- 입력:
  - 리드: 동일 리드 선택
  - 매출 계획: 방금 만든 1차 기성 선택
  - 금액: 30000000
  - 예정일: YYYY-MM-DD
  - 상태: 계획/청구/수금완료 중 선택
- 저장 클릭

**기대 확인**

- 수금 목록에 새 항목이 표시됨

## 12. 이메일 센터

- [ ] 이동: 영업관리 > 이메일
- [ ] 템플릿 추가: 이름/제목/본문/변수 스키마(JSON) 입력
- [ ] 기대: 템플릿 목록에 표시됨
- [ ] 서명 추가: 이름/HTML 입력, 기본 서명 체크
- [ ] 기대: 서명 목록에 표시됨
- [ ] 발송 로그 탭: 로그 목록 표시 확인

**이메일 센터 상세 절차**

- 이동: 상단 메뉴 영업관리 → 좌측 메뉴 이메일

1. **템플릿 추가**
   - 템플릿 탭에서 추가 버튼 클릭
   - 입력:
     - 이름: 기본 견적 안내
     - 제목: 견적서 발송드립니다
     - 본문(HTML): <p>안녕하세요 {{customer_name}}님,</p>...
     - 변수 스키마(JSON):
       `{"customer_name":"string","quote_title":"string"}`
   - 저장 클릭
   - 기대: 템플릿 목록에 새 항목 표시
2. **서명 추가**
   - 서명 탭으로 이동
   - 추가 버튼 클릭
   - 입력:
     - 이름: 홍길동
     - HTML: <p>홍길동<br/>영업팀</p>
     - 기본 서명 체크
   - 저장 클릭
   - 기대: 서명 목록에 표시, 기본 표시가 적용됨
3. **발송 로그 확인**

- 발송 로그 탭으로 이동
- 기대: 로그 목록이 표시됨(견적 발송 기능을 사용했다면 로그 항목이 누적됨)

## 실패 시 기록 항목

- 에러 메시지
- 재현 단계
- 사용자/워크스페이스
- 브라우저 콘솔 로그
- API 응답 코드
